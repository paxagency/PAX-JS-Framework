var $pax=function(t){};$pax.prototype={url:[],routes:{},routeTags:{},routeHash:0,apps:{},appLength:0,appIndex:0,routeFade:1,routeMove:1,appGlob:[],appInit:[],el:{routes:"#routes"},loadTemplate:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="position:absolute; left:50%; top:50%;max-width:50px; margin-left:-25px;margin-top:-125px; display: block; shape-rendering: auto;" width="100px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
    <circle cx="50" cy="50" fill="none" stroke="blue" stroke-width="4" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">
    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg>`,init:function(t){var e=this;document.querySelectorAll("template").forEach(function(t){var a=t.getAttribute("app"),r=t.innerHTML;if(void 0!==a){var n=a.split("_").join("/");a=a.split("-").join("_"),"index"==n&&(n=""),e.apps[a]||(e.apps[a]={}),e.apps[a].template||(e.apps[a].template=r),e.apps[a].url||(e.apps[a].url="/"+n)}}),Object.entries(this.apps).forEach(function([t,a]){e.setDefaults(a),a.url?(e.routes[a.url]=t,a.root=e.el.routes):a.global?e.appGlob.push(t):a.ignore||e.appInit.push(t)}),this.setRouter(),this.loadApps(e.appGlob,function(){0===Object.keys(e.routes).length?e.loadApps(e.appInit):e.routing()}),Object.entries(this.apps).forEach(function([t,a]){e.mirror(t)})},setDefaults:function(t){return t.root=t.root?t.root:0,t.el=t.el?t.el:{},t.tag=t.tag?t.tag:{},t.data=t.data?t.data:{},t.values=t.values?t.values:{},t.str=t.str?t.str:{},t.templates=t.templates?t.templates:{},t.filters=t.filters?t.filters:{},t.change=t.change?t.change:{},t},loadApps:function(t,e){var a=this,r=t.length,n=0;!t.length&&e&&e(),t.forEach(function(t){var i=a.apps[t];i.init&&i.init(),i.load_total=i.load?Object.keys(i.load).length:0,i.load_index=0,!i.load_total&&(a.initApp(t),++n==r&&e&&e()),i.load&&Object.entries(i.load).forEach(function([o,s]){if(s.url){var l=s.query?s.query:0;a.ajax(s.url,l,function(s){a.setLoad(t,o,s),i.load_index++,i.load_index==i.load_total&&(a.initApp(t),n++),n==r&&i.load_index==i.load_total&&e&&e()})}})})},setLoad:function(t,e,a){var r=this.apps[t];r.load[e].data=a,r.load[e].setData&&(r.data[e]=a.hits?a.hits:a),r.load[e].loaded&&this.call(a,r.load[e].loaded)},call:function(t,e){var a=e.split("."),r=window.app;return a.forEach(function(t){r=r[t]}),t?r(t):r(0)},initApp:function(t){var e=this.apps[t];!e.root&&document.querySelector('[app="'+t+'"]')&&(e.root='[app="'+t+'"]'),e.loaded&&e.loaded(),e.root&&this.renderApp(t),e.ready&&e.ready()},renderApp:function(t){var e=this,a=this.apps[t];a.set=function(e,a,r){pax.set(t,e,a,r)},a.push=function(e,a,r){pax.push(t,e,a,r)},a.pop=function(e,a){pax.pop(t,e,a)},a.render=function(){pax.renderChildren(t)},a.template||(a.template=document.querySelector(a.root).innerHTML),document.querySelectorAll(a.root).forEach(function(a){a.innerHTML=e.rendTemplate(t)}),this.renderChildren(t),a.root==pax.el.routes&&(e.routeFade&&(document.querySelector(a.root).setAttribute("style","transition:none;opacity:0;"),setTimeout(function(){document.querySelector(a.root).setAttribute("style","opacity:1; transition: opacity .3s;")},10)),e.routeMove&&window.scrollTo({top:0,behavior:"smooth"}))},renderChildren:function(t){t&&void 0!==t||alert("NO");var e=this,a=this.apps[t];document.querySelector(a.root).querySelectorAll("[app]").forEach(function(t){t.querySelectorAll("[bind]").forEach(function(t){t.setAttribute("children",t.getAttribute("bind")),t.removeAttribute("bind")})}),document.querySelector(a.root).querySelectorAll("[bind]").forEach(function(r){var n=r.tagName,i=r.getAttribute("bind");if(""==i||(a.el[i]=r,"TEMPLATE"==n))return!1;"SELECT"==n&&r.hasAttribute("multiple")&&(n="MULTIPLE"),"INPUT"==n&&"checkbox"==r.getAttribute("type")&&(n="CHECKBOX"),"INPUT"==n&&"radio"==r.getAttribute("type")&&(n="IGNORE"),"INPUT"==n&&"button"==r.getAttribute("type")&&(n="BUTTON"),"INPUT"==n&&"submit"==r.getAttribute("type")&&(n="BUTTON"),r.getAttribute("bind-type")&&(n=r.getAttribute("bind-type").toUpperCase()),a.tag[i]=n;var o=r.innerHTML;switch(!a.templates[i]&&o.indexOf("{{")>=0&&(a.templates[i]=o),n){case"UL":case"OL":a.templates[i]||(a.templates[i]='<li data-index="{{index}}">{{value}}</li>'),a.data[i]?e.render(t,i):(a.data[i]=[],r.querySelectorAll("li").forEach(function(t){a.data[i].push(t.innerHTML)}));break;case"RADIO":a.templates[i]||(a.templates[i]="<label><input type='radio' value='{{this.id}}' name='"+i+"'>{{this.text}}</label> "),a.data[i]?a.el[i].innerHTML=e.render(t,i):(a.data[i]=[],a.el[i].querySelectorAll('input[name="'+i+'"]').forEach(function(t){a.data[i].push({id:t.value,text:t.innerHTML})})),a.values[i]&&(a.el[i].querySelector('input[name="'+i+'"][value="'+a.values[i].id+'"]').checked=!0),a.el[i].querySelectorAll('input[name="'+i+'"]').forEach(function(a){a.addEventListener("change",function(a){e.setData(t,i)})});break;case"CHECKBOX":if(a.data[i]){var s=document.createElement("input");s.setAttribute("type","checkbox"),s.setAttribute("name",i),s.setAttribute("bind",i);var l=document.createElement("label");l.appendChild(s),l.innerHTML+=a.data[i].text,a.el[i].parentNode.innerHTML=l.outerHTML,a.data[i].id&&(s.checked=!0)}else a.data[i]={id:0,text:r.parentNode.innerHTML};a.el[i].addEventListener("change",function(a){e.setData(t,i)});break;case"INPUT":a.data[i]||0===a.data[i]?r.value=a.data[i]:a.data[i]=r.value,a.el[i].addEventListener("keyup",function(a){e.setData(t,i)});break;case"TEXTAREA":a.data[i]?r.innerHTML=a.data[i]:a.data[i]=r.innerHTML,a.el[i].addEventListener("focusout",function(a){e.setData(t,i)});break;case"SELECT":a.templates[i]||(a.templates[i]="<option value='{{this.id}}'>{{this.text}}</option>"),a.data[i]?a.el[i].innerHTML=e.render(t,i):(a.data[i]=[],a.el[i].querySelectorAll("option").forEach(function(t){a.data[i].push({id:t.value,text:t.innerHTML})})),a.values[i]&&(a.el[i].value=a.values[i].id),a.values[i]||""==a.data[i][0].id||(a.values[i]=a.data[i][0]),a.el[i].addEventListener("change",function(a){e.setData(t,i)});break;case"TABLE":var p=a.templates[i]?a.templates[i]:0,u=a.config&&a.config[i]?a.config[i]:{};a.el[i].innerHTML=e.table(a.data[i],p,u);break;case"TBODY":a.templates[i]||(a.data[i]?(a.templates[i]='<tr data-index="{{index}}" data-id="{{this.id}}">',Object.entries(a.data[i][0]).forEach(function([t,e]){a.templates[i]+="<td>{{this."+t+"}}</td>"}),a.templates[i]+="</tr>"):a.templates[i]='<tr data-index="{{index}}" data-id="{{this.id}}"><td>{{this.name}}</td></tr>'),a.data[i]?e.render(t,i):a.data[i]=[];break;case"MULTIPLE":if(a.templates[i]||(a.templates[i]="<option value='{{this.id}}'>{{this.text}}</option>"),a.data[i]?a.el[i].innerHTML=e.render(t,i):(a.data[i]=[],a.el[i].querySelectorAll("option").forEach(function(t){a.data[i].push({id:t.value,text:t.innerHTML})})),a.values[i]){var c=[];a.values[i].forEach(function(t){c.push(t.id)}),c.length&&(a.el[i].value=c)}a.el[i].addEventListener("change",function(a){e.setData(t,i)});break;default:a.templates[i]||(a.templates[i]="{{value}}"),a.data[i]||(a.data[i]=r.innerHTML),e.render(t,i)}}),document.querySelector(a.root).querySelectorAll("[app]").forEach(function(t){t.querySelectorAll("[children]").forEach(function(t){t.setAttribute("bind",t.getAttribute("children")),t.removeAttribute("children")})}),document.querySelector(a.root).querySelectorAll("[app]").forEach(function(t){e.loadApps([t.getAttribute("app")])})},mirror:function(t){var e=this.apps[t],a=e.root?document.querySelectorAll(e.root):{};if(a.length>1){var r=0,n="";a.forEach(function(t){r?t.innerHTML=n:n=t.innerHTML,r++})}},render:function(t,e){if(!this.apps[t]){alert('App "'+t+'" does not exist');return}if(!e)return this.loadApps([t]);var a=this,r=this.apps[t];r.tag[e];var n=r.data[e];r.filters[e]&&(n=r.filters[e](n));var i="";if(n||(n=""),Array.isArray(n))r.templates[e]?n.forEach(function(n,o){var s=a.cleanString(r.templates[e]);s=(s=(s=s.split("{{index}}").join(o)).split("{{value}}").join(n)).split("{{this").join("{{"+t+".data."+e+"["+o+"]"),i+=s=a.tempString(s,t,n,e,o)}):i=JSON.stringify(n);else if("object"==typeof n){if(r.templates[e]){var o=a.cleanString(r.templates[e]);o=(o=o.split("{{this").join("{{"+t+".data."+e)).split("{{value").join("{{"+t+".data."+e),i+=o=a.tempString(o,t,r.data[e],e)}else i=JSON.stringify(n)}else{var s=n;if(r.templates[e]){var o=a.cleanString(r.templates[e]);o=(o=o.split("{{this").join("{{"+t+".data")).split("{{value").join("{{"+t+".data."+e),i+=o=a.tempString(o,t,r.data[e],e)}else i=s}return document.querySelector(r.root).querySelector("[bind='"+e+"']").innerHTML=i,this.mirror(t),i},rendTemplate:function(t){if(!this.apps[t].template||""==this.apps[t].template||-1==this.apps[t].template.indexOf("{{"))return this.apps[t].template;var e=document.createElement("div");e.innerHTML=this.apps[t].template;var a={};e.querySelectorAll("[bind]").forEach(function(t){var e=Math.random().toString(36).substring(4);t.after(e),t.remove(),a[e]=t.outerHTML});var r=e.innerHTML.toString();return r=r.split("this.").join(t+".data."),r=this.tempString(r,t),Object.entries(a).forEach(function([t,e]){r=r.replace(t,e)}),r},cleanString:function(t){return t=(t=t.toString()).replace(/{{(.*?)}}/gi,function(t){return t=t.replace(/ /g,"")})},tempString:function(t,e,a,r,n){var i=this;return t.replace(/\{\{[^\}]*\}\}/g,function(t,o){return i.tempValue(t,e,a,r,n)})},tempValue:function(s,key,obj,id,n){var self=this;(fun=(s=s.replace("{{","").replace("}}","").replace("()","")).split("("))[1]&&(s=fun[0]);var v=eval("this.apps."+(s=s.split("||"))[0].trim());if("function"==typeof v){if(fun[1]){fun[1]=fun[1].replace(")","");var con=void 0!==n?key+".data."+id+"["+n+"]":key+".data."+id;fun[1]=fun[1].split("this").join(con);var vl=eval("this.apps."+fun[1].trim());v=v(vl)}else v=void 0!==n?v(n,obj):v(obj)}return s[1]&&void 0==v&&(v=s[1].trim()),this.apps[key].filters[id]&&(v=this.apps[key].filters[id](v)),"object"==typeof v&&v&&v.text&&(v=v.text),"object"==typeof v&&v&&v[0]&&v[0].text&&(v=v.map(function(t){return t.text}).join(", ")),void 0!==v?v:""},setData:function(t,e){var a=this.apps[t],r=a.tag[e],n=a.el[e];switch(r){case"RADIO":a.values[e]={id:n.querySelector("input:checked").value,text:n.querySelector('input[value="'+n.value+'"]').innerHTML};break;case"CHECKBOX":var i=n.checked?1:0;a.data[e]=a.values[e]={id:i,text:n.parentNode.innerHTML};break;case"INPUT":case"TEXTAREA":a.values[e]=a.data[e]=n.value;break;case"SELECT":a.values[e]={id:n.value,text:n.options[n.selectedIndex].text};break;case"MULTIPLE":a.values[e]=[],Array.from(n.value).forEach(function(t){a.values[e].push({id:t,text:n.querySelector('option[value="'+t+'"]').innerHTML})});break;default:a.data[e]=n.innerHTML}a.change[e]&&a.change[e](a.data[e],e,t)},setHTML:function(t,e){var a=this,r=this.apps[t],n=r.data[e],i=r.tag[e],o=r.el[e];switch(i){case"UL":o.innerHTML=a.render(t,e);break;case"RADIO":r.values[e]&&(o.querySelector('input[name="'+e+'"][value="'+r.values[e].id+'"]').checked=!0);break;case"CHECKBOX":o.checked=!!n;break;case"INPUT":case"TEXTAREA":o.value=n;break;case"SELECT":r.values[e]||""==r.data[e][0].id||(r.values[e]=r.data[e][0]),r.values[e]&&(o.value=r.values[e].id);break;case"MULTIPLE":if(r.values[e]){var s=[];Array.from(r.values[e]).forEach(function(t){s.push(t.id)}),s.length&&(o.value=s)}break;case"TABLE":var l=r.templates[e]?r.templates[e]:0,p=r.config&&r.config[e]?r.config[e]:{};r.el[e].innerHTML=a.table(r.data[e],l,p);break;case"TBODY":break;default:o.innerHTML=n}r.change[e]&&r.change[e](r.data[e]),this.mirror(t)},set:function(t,e,a,r){""==a&&(a=null);var n=this.apps[t];r?this._set(e,r,n.values):(this._set(e,a,n.data),n.values[e]&&delete n.values[e]),e.indexOf(".")>-1&&(e=e.split(".")[0]),n.change[e]&&n.change[e](a,e,t),n.templates[e]&&!r&&this.render(t,e),this.setHTML(t,e)},load:function(t){var e=this;Object.entries(t).forEach(function([t,a]){e.set(t,a)})},setVar:function(t,e,a){if(a){var r=e.split("."),n=r.length-1;this.va[t]||(this.va[t]={});var i=this.va[t];r.forEach(function(t,e){i[t]||(i[t]={}),e==n&&(i[t]=a),i=i[t]})}},push:function(t,e,a,r){""==a&&(a=null);var n=this.apps[t];void 0!==r?n.data[e].splice(r,0,a):n.data[e].push(a),n.change[e]&&n.change[e](n.data[e],e,t),n.templates[e]?this.render(t,e):this.setHTML(t,e)},pop:function(t,e,a){var r=this.apps[t];void 0!==a?r.data[e].splice(a,1):r.data[e].pop(),r.change[e]&&r.change[e](r.data[e],e,t),r.templates[e]?this.render(t,e):this.setHTML(t,e)},getVals:function(t){var e=this,a={};return Array.from(t).forEach(function(t){a[t]=e.data[t]}),a},print:function(t){if(!t)return alert(JSON.stringify(this.data,null,2));alert(JSON.stringify(t,null,2))},log:function(t){window.console.log(t)},href:function(t){window.location.href=t},link:function(t){window.event.metaKey||window.event.ctrlKey?window.open(t,"_blank"):(window.history.pushState(t,t,t),this.setPath(t))},setRouter:function(){var t=this;this.routeHash?window.addEventListener("hashchange",function(){t.setPath()}):window.onpopstate=function(e){t.setPath(e.state)},this.setGetVars(),this.setPath(0,1)},setPath:function(t,e){this.routeHash?(this.path=location.hash.substr(2),this.url=this.path.split("/")):(this.path=t?t.substr(1):window.location.pathname.substr(1),this.url=this.path.split("/")),e||this.routing()},setGetVars:function(){var t=window.location.search.substring(1).split("&");pax.getVars={},t.forEach(function(t){var e=t.split("=");pax.getVars[e[0]]=e[1]})},routing:function(){for(var t="/error",e=0,a="",r="",n=this,i=0,o=this.url.length;i<o;i++)a+=i?"/"+this.url[i]:this.url[i],r+=i?"_"+this.url[i]:this.url[i],this.routes["/"+a]&&(t="/"+a),this.routeTags[r]&&(e=r);if(this.routes[t]){this.routeInit&&this.routeInit();var s=this.routes[t];document.querySelector(this.apps[s].root).innerHTML=n.loadTemplate,this.activeRoute=this.routes[t],this.loadApps([s]),this.routeReady&&this.routeReady(),Object.entries(this.apps).forEach(function([t,e]){e.appReady&&e.appReady()})}},parse:function(t){if("string"!=typeof t)return t;try{return JSON.parse(t)}catch(e){return{error:1,message:"Server Error"}}},ajax:function(t,e,a){var r=this;e?fetch(t,{method:"POST",body:pax.objectToFormData(e)}).then(function(t){return t.text()}).then(function(t){r.el.progress&&(r.el.progress.style.display="none"),a&&a(r.parse(t))}).catch(function(t){r.el.progress&&(r.el.progress.style.display="none"),a&&a({error:!0,xhr:t})}):fetch(t).then(function(t){return t.text()}).then(function(t){a&&a(r.parse(t)),r.el.progress&&(r.el.progress.style.display="none")}).catch(function(t){a&&a({error:!0,xhr:t}),r.el.progress&&(r.el.progress.style.display="none")})},_get:function(t,e){if(!t)return"";if(t=t.split("[").join(".").split("]").join("").replace("()",""),e=e||window,0>t.indexOf(".")){var a=void 0!==e[t]?e[t]:"";"object"==typeof a&&a&&a.text&&(a=a.text),"object"==typeof a&&a[0]&&a[0].text&&(a=a.map(function(t){return t.text}).join(", "))}else{var a=t.split(".").reduce(function(t,e){return t?t[e]:""},e);"object"==typeof a&&a.text&&(a=a.text),"object"==typeof a&&a&&a[0]&&a[0].text&&(a=a.map(function(t){return t.text}).join(", "))}return a},_set:function(t,e,a,r){if(!t)return"";if(a=a||window,t.indexOf(".")>-1&&(t=t.split(".")),!Array.isArray(t)||!(t.length>1))return a[t]=e,r;if(a.hasOwnProperty(t[0])&&"object"==typeof a[t[0]]||(a[t[0]]=Number.isInteger(parseInt(t[1]))?[]:{}),"*"!==t[0])return r=r||a[t[0]],this._set(t.slice(1),e,a[t[0]],r);var n=this;Object.entries(a).forEach(function([a,i]){r=r||i,n._set(t.slice(1),e,i,r)})},clone:function(t){var e=JSON.parse(JSON.stringify(t));return Object.entries(t).forEach(function([t,a]){"function"==typeof a&&(e[t]=a)}),e},table:function(t,e,a,r,n){var i=this;if(r||(r="id"),!t.length)return"<table><tbody><tr id='tr-0'><td style='text-align:center;'>There are no results</td></tr></tbody></table>";var o="<table><thead><tr>",s="<tbody>";if(e)e.forEach(function(t){o+=t.thead?"<th>"+t.thead+"</th>":"<th>"+t.id.split("_").join(" ")+"</th>"}),o+="</tr></thead>",t.forEach(function(t,n){var o=a.cl?'onclick="'+a.cl+'(this)"':"";s+=t[r]?"<tr data-id='"+t[r]+"' data-index='"+n+"' "+o+">":"<tr data-id='"+n+"' data-index='"+n+"' "+o+">",e.forEach(function(e){var a=i._get(e.id,t);e.filter&&(a=e.filter(a,t)),s+=null!=a?"<td>"+a+"</td>":"<td></td>"}),s+="</tr>"});else{var l=[];Object.entries(t[0]).forEach(function([t,e]){o+="<th>"+t.split("_").join(" ")+"</th>",l.push(t)}),o+="</tr></thead>",t.forEach(function(t,e){s+=t[r]?"<tr data-id='"+t[r]+"' data-index='"+e+"'>":"<tr data-id='"+e+"' data-index='"+e+"'>",l.forEach(function(e){var a=t[e];"object"==typeof a&&a.text&&(a=a.text),"object"==typeof a&&a[0]&&a[0].text&&(a=a.map(function(t){return t.text}).join(", ")),s+=null!=a?"<td>"+a+"</td>":"<td></td>"}),s+="</tr>"})}return n?s+"</tbody>":o+s+"</tbody></table>"},objectToFormData:function(t,e,a){if(e||(e=new FormData),a||(a=""),null!=t){if(t instanceof Date)e.append(a,t.toISOString());else if(t instanceof Array)for(let r=0;r<t.length;r++)pax.objectToFormData(t[r],e,a+"["+r+"]");else if("object"!=typeof t||t instanceof File)t instanceof File?e.append(a,t):e.append(a,t.toString());else if(t instanceof FileList)for(let n=0;n<t.length;n++)e.append(a+"[]",t[n]);else for(let i in t)t.hasOwnProperty(i)&&pax.objectToFormData(t[i],e,a?a+"["+i+"]":i)}return e}};var pax=new $pax,app=pax.apps;window.addEventListener("DOMContentLoaded",function(){pax.init()});